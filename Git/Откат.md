
Если файл уже добавлен, то сначала его нужно удалить из индекса

```
git reset index.php
```

потом откатить изменения

```
git restore index.php
```

Если файл уже **закоммичен**, но нужно откатить его к состоянию предыдущего коммита:

```
git checkout HEAD~1 -- index.php
```

или точнее (к HEAD):

```
git restore --source=HEAD index.php
```

---

### Удалить последний коммит

```bash
git reset --hard HEAD~1
```

- HEAD~1 — это один коммит назад.
- --hard — удаляет коммит и изменения в рабочей директории.

Предположим, последний коммит добавил файл `a.txt`.
- `--soft` → коммит исчез, `a.txt` остаётся staged (`git add` уже сделан).
- `--mixed` → коммит исчез, `a.txt` лежит в рабочем каталоге как изменённый файл, но не staged.
- `--hard` → коммит исчез, `a.txt` полностью удалён.

Если хочешь сохранить изменения локально, можно использовать --soft вместо --hard.

Обнови удалённый репозиторий, переписав историю:

```bash
git push origin <branch-name> --force
```

- `--force` переписывает историю ветки — если кто-то ещё работал с этой веткой, у него будут конфликты.