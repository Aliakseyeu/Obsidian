
Если класс наследуется от CBitrixComponent, то у него есть метода для кеширования

```php
// class.php
$cacheId = serialize(['USER_ID' => $userId]);
if($this->startResultCache(
	false, // время жизни. в данном случае возьмется из настроек компонента
	$cacheId // строка идентификатор кеша
	// третьим параметром можно передать путь до кеша
)){
	if(empty($this->arResult['NOTIFICATION'])){
		// Если нечего кешировать, то прерываем процесс, чтобы не засорять кеш
		$this->abortResultCache();
	}

	/* Проверка включения управляемого кеша */
	if(defined('BX_COMP_MANAGED_CACHE')){
		/* Пометка кеша тегом */
		$taggedCache = Application::getInstance()->getTaggedCache();
		// $taggedCache->startTagCache($path);
		$taggedCache->registerTag('notification_id_' . $notificationId);
	}
	
	$this->arResult['NEW_KEY'] = 'NEW_VALUE';
	$this->setResultCacheKeys(['NEW_KEY']); // Указывает какте ключи $arResult необходимо закешировать
}
```

Метод проверяет есть ли кеш и компонент работает в режиме автокеширования, то запускается процесс кеширования. В конце которого кешируется содержимое массива $arResult. Если кеш есть и он не просрочен, то на экран отправляется закешированная верстка шаблона, подставляет сохраненные данные в $arResult и возвращается false

>[!NOTE] Путь к кешу по умолчанию
>bitrix\cache\site_name(s1)\path_to_component

---

### Удаление определенного кеша

```php
// listener
public static function(Entity\Event $event): Entity\EventResult
{
	$result = new Entity\EventResult();
	$id = $event->getParameter('id');
	if(is_array($id)){
		$id = $id['ID'];
	}
	if(!$id){
		return $result;
	}
	if(defined('BX_COMP_MANAGED_CACHE')){
		$taggedCache = Applicaion::getInstance()->getTaggedCache();
		$taggedCahe->clearByTag('notification_id_'.$id);
	}
	return $result;
}
```

```php
$ormEventManager = \Bitrix\Main\ORM\EventManager::getInstance();
$ormEventManager->addEventHandler(
	NotificationTable::class,
	DataManager::EVENT_ON_AFTER_UPDATE,
	[
		Notification::class,
		'clearNotificationsCache'
	]
);
```

---

```php
$ttl = 360000;
$id = 'mycmp_admin_list';
$path = '/mycompany.custom/admin_list'
$cache = Cache::createInstance();
if($cache->initCache($ttl, $id, $path)){
	$cachedFields = $cache->getVars();
} elseif($cache->startDataCache()){
	$cachedFilds = ['data'];
	if(defined('BX_COMP_MANAGED_CACHE')){
		/* Пометка кеша тегом */
		$taggedCache = Application::getInstance()->getTaggedCache();
		$taggedCache->startTagCache($path);
		$taggedCache->registerTag('admin_group_cache');
		$taggedCache->endTagCache();
	}
	$cache->endDataCache($cachedFields);
}
```